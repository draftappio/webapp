<div class="team-members-settings partial__content">
  <form class="invite-form">
    <div class="row">
      <div class="column large-4 head-filters">
        <dropdown-toggle pane-align="left" close-on-click="true">
          <toggle>
            <button class="select" onclick="return false;">{{selectedProject.name || 'Select Project'}}</button>
          </toggle>
          <pane>
            <ul class="menu vertical">
              <li class="title">Select Project</li>
              <li ng-repeat="project in projects"><a ng-click="setSelectedProject(project); this.$close();">{{project.name}}</a></li>
            </ul>
          </pane>
        </dropdown-toggle>
      </div>
    </div>
  </form>
  <form class="invite-form" ng-submit="inviteMembers()">
    <fieldset ng-disabled="settingsVM.loading">
      <legend>Invite Team Members</legend>
      <div class="form-group row" ng-repeat="member in members">
        <div class="column large-3">
          <input class="form-control" id="email" type="email" placeholder="Enter Email Address" ng-model="member.email" required />
        </div>
        <div class="column large-3">
          <input class="form-control" id="first_name" type="text" placeholder="First Name" ng-model="member.firstname" required />
        </div>
        <div class="column large-3">
          <input class="form-control" id="last_name" type="text" placeholder="Last Name" ng-model="member.lastname" required />
        </div>
        <div class="column large-2 head-filters">
          <dropdown-toggle pane-align="left" close-on-click="true">
            <toggle>
              <button class="select" onclick="return false;">{{member.roleName || 'Role'}}</button>
            </toggle>
            <pane>
              <ul class="menu vertical">
                <li class="title">Role</li>
                <li><a ng-click="selectMemberRole(member, 0); this.$close();">Member</a></li>
                <li><a ng-click="selectMemberRole(member, 1); this.$close();">Admin</a></li>
              </ul>
            </pane>
          </dropdown-toggle>
        </div>
        <div class="column large-1 team-member__actions">
          <button class="team-member__delete" onclick="return false;" ng-click="removeUnsavedMember($index)">
            <div class="icon ion-close-circled"></div>
          </button>
        </div>
      </div>
      <div class="row form-group">
        <div class="column large-4"><a class="add-member" ng-click="addNewMember()"><i class="icon ion-plus"></i>Add Another Team Member</a></div>
        <div class="column large-4 large-offset-4">
          <button class="button expanded success" type="submit" ng-disabled="settingsVM.loading">Invite Team Members</button>
        </div>
      </div>
    </fieldset>
  </form>
  <form class="management-form" ng-if="selectedProject">
    <fieldset>
      <legend>Manage Team Members</legend>
      <div class="form-group team-member" ng-repeat="member in selectedProject.team.users" ng-if="checkIfAdmin()">
        <div class="team-member__identity">
          <div class="team-member__img-wrapper">
            <img class="avatar" ng-if="member.image!==null" alt="{{member.name}}" ng-src="{{::(member.image)}}" />
            <img class="avatar" ng-if="member.image===null" alt="{{member.name}}" gravatar-src="member.email" ng-fallback="images/user-avatar.png" />
          </div><span class="team-member__name">{{member.name}}</span>
          <small class="u-padding" title="Pending accept" ng-if="member.pending"><i>pending</i></small>
        </div><span class="team-member__email">{{member.email}}</span>
        <div ng-if="member.role === 1" class="team-member__actions"><span class="team-member__role team-member__role--admin">
          <div class="icon ion-checkmark-circled"></div>Admin</span>
          <button class="team-member__delete" ng-click="openModal('app/partials/remove-member.html', {email: member.email, name: member.name})">
            <div class="icon ion-close-circled"></div>
          </button>
        </div>
        <div ng-if="member.role === 0" class="team-member__actions"><span class="team-member__role">
          Member</span>
          <button class="team-member__delete" ng-click="openModal('app/partials/remove-member.html', {email: member.email, name: member.name})">
            <div class="icon ion-close-circled"></div>
          </button>
        </div>
      </div>
      <div ng-if="!checkIfAdmin()">
        <p>Sorry, you're not an admin for this project.</p>
      </div>
    </fieldset>
  </form>
</div>
